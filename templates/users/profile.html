<!-- users/templates/users/profile.html -->
{% extends 'base.html' %}

{% block title %}Мой профиль{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h1>Мой профиль</h1>

        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Личная информация</h5>
                <p><strong>Имя:</strong> {{ user.get_full_name|default:user.username }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Роль:</strong>
                    {% if user.is_manager %}
                        <span class="badge bg-warning text-dark">Менеджер</span>
                    {% else %}
                        <span class="badge bg-primary">Пользователь</span>
                    {% endif %}
                </p>
            </div>
        </div>

        {% if user_mailing_stats %}
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Статистика рассылок</h5>
                <p><strong>Всего рассылок:</strong> {{ user_mailing_stats.total_mailings }}</p>
                <p><strong>Активных рассылок:</strong> {{ user_mailing_stats.active_mailings }}</p>
                <p><strong>Успешных отправок:</strong> {{ user_mailing_stats.successful_attempts }}</p>
                <p><strong>Неудачных отправок:</strong> {{ user_mailing_stats.failed_attempts }}</p>
            </div>
        </div>
        {% endif %}

        <div class="d-flex gap-2">
            <!-- Исправлено: profile_update вместо profile_edit -->
            <a href="{% url 'users:profile_update' %}" class="btn btn-outline-primary">Редактировать профиль</a>

            {# <a href="{% url 'users:password_change' %}" class="btn btn-outline-secondary">Сменить пароль</a> #}
            <!--button class="btn btn-outline-secondary" disabled>Сменить пароль (в разработке)</button-->
        </div>
    </div>
</div>
{% endblock %}
